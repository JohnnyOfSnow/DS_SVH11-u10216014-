<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>DFS(Depth-first search)</title>
		<style>
			canvas{
				border: solid 1px green;
			}
		</style>
	</head>
	
	<body>
		
		<form name = "DFSForm" id="DFSForm" >
			<table>
			<tr>
				<td><p id = "chooseMode">1.設定模式：</p></td>  <td><input type="radio" name="modeChoice1" value="模擬模式" onClick = "modeChoice();">模擬模式</td>  <td><input type="radio" name="modeChoice1" value="測驗模式" onClick = "modeChoice();">測驗模式   </td>
				<td><p id="mode"></p></td>

			</tr>
			<tr>
				<td><p id = "chooseGraph">2.設定圖形模式：</p></td>  <td><input type="radio" name="graph1" value="undirected graph" onClick = "graphChoice();">undirected graph</td>  <td><input type="radio" name="graph1" value="directed graph" onClick = "graphChoice();">directed graph   </td>
				<td><p id="graph"></p></td>
			</tr>
			</table>

			<table>
				<tr>
					<td><p id = "setAdj">3.輸入鄰接矩陣資料：</p></td>  
				</tr>
			</table>
			<table>
				<tr>
					<td></td>
					<td><p>0</p></td>
					<td><p>1</p></td>
					<td><p>2</p></td>
					<td><p>3</p></td>
					<td><p>4</p></td>
					<td rowspan = "7"><canvas id = "myGraph" width = 280 height = 280>Your browser does not support</canvas></td>

					<td><p id = "relationship">5.各圓的關係</p></td>
					
				</tr>
				<tr>
					<td align="center"><p>0</p></td>
					<td><input type=text value="0" id=0 size="5" readonly="readonly"></td>
					<td><input type=text value="" id=1 size="5"></td>
					<td><input type=text value="" id=2 size="5"></td>
					<td><input type=text value="" id=3 size="5"></td>
					<td><input type=text value="" id=4 size="5"></td>
					<td align="center"><p>圓編號</p></td>
					<td align="center"><p>d[u]</p></td>
					<td align="center"><p>f[u]</p></td>
					<td align="center"><p>pi[u]</p></td>
					<td><p>堆疊目前狀況:</p></td>
					<td><input type=text value="" id=stack size="15" readonly="readonly"></td>
				</tr>
				<tr>
					<td align="center"><p>1</p></td>
					<td><input type=text value="" id=5 size="5"></td>
					<td><input type=text value="0" id=6 size="5" readonly="readonly"></td>
					<td><input type=text value="" id=7 size="5"></td>
					<td><input type=text value="" id=8 size="5"></td>
					<td><input type=text value="" id=9 size="5"></td>
					<td align="center"><p>0</p></td>
					<td><input type=text value="" id=0circledu size="15" ></td>
					<td><input type=text value="" id=0circlefu size="15" ></td>
					<td><input type=text value="" id=0circlepiu size="15" ></td>
				</tr>
				<tr>
					<td align="center"><p>2</p></td>
					<td><input type=text value="" id=10 size="5"></td>
					<td><input type=text value="" id=11 size="5"></td>
					<td><input type=text value="0" id=12 size="5" readonly="readonly"></td>
					<td><input type=text value="" id=13 size="5"></td>
					<td><input type=text value="" id=14 size="5"></td>
					<td align="center"><p>1</p></td>
					<td><input type=text value="" id=1circledu size="15" ></td>
					<td><input type=text value="" id=1circlefu size="15" ></td>
					<td><input type=text value="" id=1circlepiu size="15" ></td>
				</tr>
				<tr>
					<td align="center"><p>3</p></td>
					<td><input type=text value="" id=15 size="5"></td>
					<td><input type=text value="" id=16 size="5"></td>
					<td><input type=text value="" id=17 size="5"></td>
					<td><input type=text value="0" id=18 size="5" readonly="readonly"></td>
					<td><input type=text value="" id=19 size="5"></td>
					<td align="center"><p>2</p></td>
					<td><input type=text value="" id=2circledu size="15" ></td>
					<td><input type=text value="" id=2circlefu size="15" ></td>
					<td><input type=text value="" id=2circlepiu size="15" ></td>
				</tr>
				<tr>
					<td align="center"><p>4</p></td>
					<td><input type=text value="" id=20 size="5"></td>
					<td><input type=text value="" id=21 size="5"></td>
					<td><input type=text value="" id=22 size="5"></td>
					<td><input type=text value="" id=23 size="5"></td>
					<td><input type=text value="0" id=24 size="5" readonly="readonly"></td>
					<td align="center"><p>3</p></td>
					<td><input type=text value="" id=3circledu size="15" ></td>
					<td><input type=text value="" id=3circlefu size="15" ></td>
					<td><input type=text value="" id=3circlepiu size="15" ></td>
				</tr>
				<tr>
					<td><p></p></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td align="center"><p>4</p></td>
					<td><input type=text value="" id=4circledu size="15" ></td>
					<td><input type=text value="" id=4circlefu size="15" ></td>
					<td><input type=text value="" id=4circlepiu size="15" ></td>
				</tr>

			</table>
			<table>
				<tr>
					<td><input type = "button"  value = "輸入完成" onClick = "decideAdjMatrix();" id = "inputComplete" ></td> 
					<td><input type = "button"  value = "隨機產生" onClick = "randomGenerateAdjMatrix();" id = "randomInput" ></td>
					<td><input type = "button"  value = "清除" onClick = "clearAdjMatrix();" id = "clearInput" ></td> 
				</tr>
			</table>
			<table>
				<tr>
					<td><p id="state"></p></td>
				</tr>
				
			</table>
			<table>
				<tr>
					<td><p id = "nowState"></p></td>
					<td><p id = "allState"></p></td>
				</tr>
				<tr>
					<td>
						<textarea name="Content" style="width:570px;height:100px;" id=currentStepDFS readonly="readonly" ></textarea>
					</td>
					<td>
						<textarea name="Content" style="width:570px;height:100px;" id=allStepDFS readonly="readonly"></textarea>
					</td>
				</tr>
				<tr>
					<td>
						<table>
							<tr>
								<td><p id = "simulateUse">模擬模式用按鈕：</p></td> 
								<td><input type = "button"  value = "下一步" onClick = "next();" id = "simNext" ></td> 
								<td><input type = "button"  value = "一次做完" onClick = "doAll();" id = "simAll" ></td>
								<td><input type = "button"  value = "全部清除" onClick = "clearAll();" id = "simClear" ></td> 
							</tr>
						</table>
					</td>
					<td>
						<table>	
							<tr>
								<td><p id = "testUse">測驗模式用按鈕：</p></td> 
								<td><input type = "button"  value = "開始出題" onClick = "giveQuestion();" id = "testStart" ></td> 
								<td><input type = "button"  value = "確認答案" onClick = "checkAnswer();" id = "testCheck" ></td>
								<td><input type = "button"  value = "全部清除" onClick = "clearAll();" id = "testClear" ></td> 
							</tr>
						</table>	
					</td>
				</tr>
			</table>
			
		</form>

		<script>

			// The function will be invoke, when you open the HTML file
			window.onload = function (){
				clearAll();
			}

			var mode = -1; // 0 is simulate mode  , 1 is test mode
			var graph = -1; // 0 is undirected graph , 1 is directed graph
			var DFSstep = 0; // control the DFS step for the next button use.
			var wrongInput = 0;
			var isDecideAdjMatrix = 0;
			var adjMatrix = []; // A two dimension array adjMatrix represents the graph.
			var isAnswer = 0;
			adjMatrix[0] = [0,0,0,0,0];
			adjMatrix[1] = [0,0,0,0,0];
			adjMatrix[2] = [0,0,0,0,0];
			adjMatrix[3] = [0,0,0,0,0];
			adjMatrix[4] = [0,0,0,0,0];

			var circleDiscover = new Array(0,0,0,0,0); // record the circle wether is discovered.
			var circledu = new Array(-1,-1,-1,-1,-1); // record the circle d[u].
			var circlefu = new Array(3,4,5,6,7); // record the circle f[u].
			var circlepiu = new Array(-1,-1,-1,-1,-1); // record the circle pi[u].

			var du = 0;
			var u = -1;
			var time = 0;
			var find = -1;

			var connectString = "";
			var stackString = "";
			var stackStringHandle;
			var allStepString = "";
			var string0 = "將所有頂點的d[u]都設為-1(NIL)，pi[u]都設為-1(NIL)，f[u]都設為-1(NIL)";
			var string1 = "現在頂點為";
			var string2 = "堆疊(Stack)是否為空呢?";
			var string3 = "在圖中找尋尚未發現的點";
			var string4 = "找到的點為頂點";
			var string5 = "現在開始找尋與";
			var string6 = "頂點";
			var string7 = "有連接的點";
			var string8 = "找到的一個點為頂點";
			var string9 = "將它的pi[u]設為 ";
			var string10 = "d[u]設為 ";
			var string11 = "，塗灰。";
			var string12 = "並且f[u]設為 ";
			var string13 = "從堆疊pop一個頂點為頂點";
			var string14 = "是否所有頂點已經找完呢? ";
			var string15 = "找不到與";
			var string16 = "連接的未發現的頂點";
			var string17 = "現在堆疊為空，再回去找尋圖上的未發現點";

			function modeChoice(){
				var form = document.getElementById("DFSForm");
				var result = document.getElementById("mode");
				clearAdjMatrix();
			
				for (var i = 0; i < form.modeChoice1.length; i++) {
					if ( form.modeChoice1[i].checked ) {
						result.innerHTML = "you selected " + form.modeChoice1[i].value;
						mode = i;			
						break;
					}
				}
				//process();
			}// end function modeChoice()
			
			function graphChoice(){
				var form = document.getElementById("DFSForm");
				var result = document.getElementById("graph");
				clearAdjMatrix();
				
				for (var i = 0; i < form.graph1.length; i++) {
					if ( form.graph1[i].checked ) {
						graph = i;
						result.innerHTML = "you selected " + form.graph1[i].value;
						
					}
				}
				//process();
			}// end function graphChoice()
			
			function modeClear(){
				var form = document.getElementById("DFSForm");
				var result = document.getElementById("mode");
				for (var i = 0; i < form.modeChoice1.length; i++) {
					form.modeChoice1[i].checked = false;
				}
				result.innerHTML = "";
				mode = -1;
				//process();
				
			}// end function modeClear()
			
			function graphClear(){
				var form = document.getElementById("DFSForm");
				var result = document.getElementById("graph");
				for (var i = 0; i < form.graph1.length; i++) {
					form.graph1[i].checked = false;
				}
				result.innerHTML = "";
				graph = -1;
				//process();
			}// end function graphClear()

			function decideAdjMatrix(){
				if(isAnswer == 0){
					clearGraph();
					var count = 0;
					wrongInput = 0;
					document.getElementById("state").innerHTML = "";
					if(mode == 0 || mode == 1){ // simulate and test
						if(graph == 0){ // undirected graph
							for(var i = 0; i < 3; i++){
								for(var j = 0; j < adjMatrix[i].length; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var input = document.getElementById(count);
										var userInput = eval(input.value);
										if(userInput != 0 && userInput != 1){
											wrongInput = 1;
										}
										adjMatrix[i][j] = userInput;
										count = count + 1;
									}
								}
							}

							for(var i = 3; i < 5; i++){
								for(var j = 0; j < adjMatrix[i].length; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var input = document.getElementById(count);
										var userInput = eval(input.value);
										if(userInput != 0 && userInput != 1){
											wrongInput = 1;
										}
										adjMatrix[i][j] = userInput;
										count = count + 1;
									}
								}
							}

							count = 0;
							for(var i = 0; i < 5; i++){
								for(var j = 0; j < adjMatrix[i].length; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										if(adjMatrix[i][j] != adjMatrix[j][i]){ // undirected graph is a symmetric matrix.
											wrongInput = 1;
										}
										
										count = count + 1;
									}
								}
							}

							if(wrongInput == 1){
								clearAdjMatrix(); // User Input the wrong data.
								document.getElementById("state").innerHTML = "你輸入的資料不正確";
							}else{
								isDecideAdjMatrix = 1;
								drawGraph();
							}
						}else if(graph == 1){
							for(var i = 0; i < 5; i++){
								for(var j = 0; j < adjMatrix[i].length; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var input = document.getElementById(count);
										var userInput = eval(input.value);
										if(userInput != 0 && userInput != 1){
											wrongInput = 1;
										}
										adjMatrix[i][j] = userInput;
										count = count + 1;
									}
								}
							}
							if(wrongInput == 1){
								clearAdjMatrix(); // User Input the wrong data.
								document.getElementById("state").innerHTML = "你輸入的資料不正確";
							}else{
								isDecideAdjMatrix = 1;
								drawGraph();
							}
						}else{

						}
						//process();
					}else{

					}
				}
			}// end function decideAdjMatrix()

			function randomGenerateAdjMatrix(){
				if(isAnswer == 0){
					clearGraph();
					DFSstep = 0;
					for(var k = 0; k < circleDiscover.length; k++){
						circleDiscover[k] = 0;
						circledu[k] = -1;
						circlefu[k] = -1;
						circlepiu[k] = -1;
					}
					var count = 0;
					document.getElementById("state").innerHTML = "";
					if(mode == 0 || mode == 1){ // simulate and test
						if(graph == 0){ // undirected graph
							for(var i = 0; i < 5; i++){
								for(var j = i; j < 5; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var n1 = Math.floor(Math.random()*2);
										var input = document.getElementById(count);
										input.value = n1;
										adjMatrix[i][j] = n1;
										count = count + 1;
									}
								}
								count = count + i + 1;
							}

							count = 5;
							for(var i = 1; i < 5; i++){
								for(var j = 0; j < i; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var input = document.getElementById(count);
										input.value = adjMatrix[j][i];
										adjMatrix[i][j] = adjMatrix[j][i];
										count = count + 1;
									}
								}
								count = count + (5 - i);
							}
							isDecideAdjMatrix = 1;
							drawGraph();
						}else if(graph == 1){
							for(var i = 0; i < 5; i++){
								for(var j = 0; j < adjMatrix[i].length; j++){
									if(i == j){
										count = count + 1;
										continue; // for adj Matrix when i == j must 0
									}else{
										var n1 = Math.floor(Math.random()*2);
										var input = document.getElementById(count);
										input.value = n1;
										adjMatrix[i][j] = n1;
										count = count + 1;
									}
								}
							}
							isDecideAdjMatrix = 1;
							drawGraph();
						}else{

						}
						
					}else{

					}
					//process();
				}
			}// end function randomGenerateAdjMatrix()

			function clearAdjMatrix(){	
				var count = 0;
				for(var i = 0; i < 5; i++){
					for(var j = 0; j < adjMatrix[i].length; j++){
						if(i == j){
							count = count + 1;
							continue; // for adj Matrix when i == j must 0
						}else{
							
							var input = document.getElementById(count);
							input.value = "";
							adjMatrix[i][j] = 0;
							count = count + 1;
						}
					}
				}

				document.getElementById("0").value = 0;
				document.getElementById("6").value = 0;
				document.getElementById("12").value = 0;
				document.getElementById("18").value = 0;
				document.getElementById("24").value = 0;
				
				isDecideAdjMatrix = 0;
				clearGraph();
				//process();
			}// end function clearAdjMatrix()

			function drawGraph(){
				
				var canvas = document.getElementById("myGraph"); // Catch the canvas
				var ctx = canvas.getContext("2d"); // Draw all object in two dimension

				ctx.font = "14px Verdana"; // Set the word size = 14px typeface = Verdana
				ctx.fillText("0",20,20); // write the circle number.
				ctx.fillText("1",244,20);
				ctx.fillText("2",20,130);
				ctx.fillText("3",244,130);
				ctx.fillText("4",180,260);

				/**
				 *  1. circleDiscover[] = 0  the circle is not find.
				 *  2. circleDiscover[] = 1  the circle is discovered, and should have the red circumference.
				 *  3. circleDiscover[] = 2  the circle is done, and should be colored gray.
				 */
				if(circleDiscover[0] == 0){
					ctx.beginPath();
					ctx.arc(60,40,30,0,2 * 3.14); // the 0 circle
					ctx.stroke();
				}else if(circleDiscover[0] == 1){
					ctx.beginPath();
					ctx.arc(60,40,30,0,2 * 3.14); // the 0 circle
					ctx.strokeStyle = "red";
					ctx.stroke();
					ctx.strokeStyle = "black";
				}else if(circleDiscover[0] == 2){
					ctx.beginPath();
					ctx.arc(60,40,30,0,2 * 3.14); // the 0 circle
					ctx.fillStyle = "gray";
					ctx.fill();
					ctx.fillStyle = "black";
				}else{

				}

				if(circleDiscover[1] == 0){
					ctx.beginPath();
					ctx.arc(220,40,30,0,2 * 3.14); // the 1 circle
					ctx.stroke();
				}else if(circleDiscover[1] == 1){
					ctx.beginPath();
					ctx.arc(220,40,30,0,2 * 3.14); // the 1 circle
					ctx.strokeStyle = "red";
					ctx.stroke();
					ctx.strokeStyle = "black";
				}else if(circleDiscover[1] == 2){
					ctx.beginPath();
					ctx.arc(220,40,30,0,2 * 3.14); // the 1 circle
					ctx.fillStyle = "gray";
					ctx.fill();
					ctx.fillStyle = "black";
				}else{
					
				}

				if(circleDiscover[2] == 0){
					ctx.beginPath();
					ctx.arc(60,150,30,0,2 * 3.14); // the 2 circle
					ctx.stroke();
				}else if(circleDiscover[2] == 1){
					ctx.beginPath();
					ctx.arc(60,150,30,0,2 * 3.14); // the 2 circle
					ctx.strokeStyle = "red";
					ctx.stroke();
					ctx.strokeStyle = "black";
				}else if(circleDiscover[2] == 2){
					ctx.beginPath();
					ctx.arc(60,150,30,0,2 * 3.14); // the 2 circle
					ctx.fillStyle = "gray";
					ctx.fill();
					ctx.fillStyle = "black";
				}else{
					
				}

				if(circleDiscover[3] == 0){
					ctx.beginPath();
					ctx.arc(220,150,30,0,2 * 3.14); // the 3 circle
					ctx.stroke();
				}else if(circleDiscover[3] == 1){
					ctx.beginPath();
					ctx.arc(220,150,30,0,2 * 3.14); // the 3 circle
					ctx.strokeStyle = "red";
					ctx.stroke();
					ctx.strokeStyle = "black";
				}else if(circleDiscover[3] == 2){
					ctx.beginPath();
					ctx.arc(220,150,30,0,2 * 3.14); // the 3 circle
					ctx.fillStyle = "gray";
					ctx.fill();
					ctx.fillStyle = "black";
				}else{
					
				}

				if(circleDiscover[4] == 0){
					ctx.beginPath();
					ctx.arc(140,240,30,0,2 * 3.14); // the 4 circle
					ctx.stroke();
				}else if(circleDiscover[4] == 1){
					ctx.beginPath();
					ctx.arc(140,240,30,0,2 * 3.14); // the 4 circle
					ctx.strokeStyle = "red";
					ctx.stroke();
					ctx.strokeStyle = "black";
				}else if(circleDiscover[4] == 2){
					ctx.beginPath();
					ctx.arc(140,240,30,0,2 * 3.14); // the 4 circle
					ctx.fillStyle = "gray";
					ctx.fill();
					ctx.fillStyle = "black";
				}else{
					
				}

				ctx.lineWidth = 1;
				ctx.strokeStyle = "#000000";


				/**
				 *  When the circle d[u] is decided, it should be write.
				 */
				if(circledu[0] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText(circledu[0],50,40); // write the circle d[u] number.
					ctx.fillStyle = "black";
				}

				if(circledu[1] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText(circledu[1],210,40); // write the circle d[u] number.
					ctx.fillStyle = "black";
				}

				if(circledu[2] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText(circledu[2],50,150); // write the circle d[u] number.
					ctx.fillStyle = "black";
				}

				if(circledu[3] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText(circledu[3],210,150); // write the circle d[u] number.
					ctx.fillStyle = "black";
				}

				if(circledu[4] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText(circledu[4],130,240); // write the circle d[u] number.
					ctx.fillStyle = "black";
				}

				/**
				 *  When the circle f[u] is decided, it should be write.
				 */
				if(circlefu[0] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText("/",63,40); 
					ctx.fillText(circlefu[0],70,40); // write the circle f[u] number.
					ctx.fillStyle = "black";
				}

				if(circlefu[1] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText("/",223,40);
					ctx.fillText(circlefu[1],230,40); // write the circle f[u] number.
					ctx.fillStyle = "black";
				}

				if(circlefu[2] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText("/",63,150);
					ctx.fillText(circlefu[2],70,150); // write the circle f[u] number.
					ctx.fillStyle = "black";
				}

				if(circlefu[3] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText("/",220,150);
					ctx.fillText(circlefu[3],230,150); // write the circle f[u] number.
					ctx.fillStyle = "black";
				}

				if(circlefu[4] != -1){
					ctx.fillStyle = "#000066";
					ctx.fillText("/",140,240);
					ctx.fillText(circlefu[4],150,240); // write the circle f[u] number.
					ctx.fillStyle = "black";
				}



				
				if(graph == 0){ // undirected graph
					if(adjMatrix[0][1] == 1){ // circle 0 to 1
						ctx.beginPath();
						ctx.moveTo(90,40);
						ctx.lineTo(190,40);
						ctx.stroke();
					}

					if(adjMatrix[0][2] == 1){ // circle 0 to 2
						ctx.beginPath();
						ctx.moveTo(60,70);
						ctx.lineTo(60,120);
						ctx.stroke();
					}

					if(adjMatrix[0][3] == 1){ // circle 0 to 3
						ctx.beginPath();
						ctx.moveTo(80,60);
						ctx.lineTo(198,132);
						ctx.stroke();
					}

					if(adjMatrix[0][4] == 1){ // circle 0 to 4
						ctx.beginPath();
						ctx.moveTo(80,60);
						ctx.lineTo(140,210);
						ctx.stroke();
					}


					if(adjMatrix[1][2] == 1){ // circle 1 to 2
						ctx.beginPath();
						ctx.moveTo(205,63);
						ctx.lineTo(87,135);
						ctx.stroke();
					}

					if(adjMatrix[1][3] == 1){ // circle 1 to 3
						ctx.beginPath();
						ctx.moveTo(220,70);
						ctx.lineTo(220,120);
						ctx.stroke();
					}

					if(adjMatrix[1][4] == 1){ // circle 1 to 4
						ctx.beginPath();
						ctx.moveTo(205,63);
						ctx.lineTo(140,210);
						ctx.stroke();
					}

					if(adjMatrix[2][3] == 1){ // circle 2 to 3
						ctx.beginPath();
						ctx.moveTo(90,150);
						ctx.lineTo(190,150);
						ctx.stroke();
					}

					if(adjMatrix[2][4] == 1){ // circle 2 to 4
						ctx.beginPath();
						ctx.moveTo(80,170);
						ctx.lineTo(140,210);
						ctx.stroke();
					}

					if(adjMatrix[3][4] == 1){ // circle 3 to 4
						ctx.beginPath();
						ctx.moveTo(205,175);
						ctx.lineTo(158,215);
						ctx.stroke();
					}	
				}else if(graph == 1){
					if(adjMatrix[0][1] >= 1){ // circle 0 to 1

						if(adjMatrix[0][1] <= 4){
							if(adjMatrix[0][1] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[0][1] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[0][1] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(80,20);
							ctx.lineTo(200,20);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,15);
							ctx.lineTo(200,20);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,25);
							ctx.lineTo(200,20);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 80,20, 200,20); // cross edge
							dashedLine("myGraph", 190,15, 200,20); 
							dashedLine("myGraph", 190,25, 200,20); 

						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[1][0] == 1){ // circle 1 to 0
						if(adjMatrix[1][0] <= 4){
							if(adjMatrix[1][0] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[1][0] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[1][0] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(192,30);
							ctx.lineTo(88,30);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(95,25);
							ctx.lineTo(90,30);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(95,35);
							ctx.lineTo(90,30);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 192,30, 88,30); // cross edge
							dashedLine("myGraph", 95,25, 90,30); 
							dashedLine("myGraph", 95,35, 90,30); 

						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
						
					}

					if(adjMatrix[0][2] == 1){ // circle 0 to 2
						if(adjMatrix[0][2] <= 4){
							if(adjMatrix[0][2] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[0][2] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[0][2] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(40,60);
							ctx.lineTo(40,127);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(30,110);
							ctx.lineTo(40,127);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(50,110);
							ctx.lineTo(40,127);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 40,60, 40,127); // cross edge
							dashedLine("myGraph", 30,110, 40,127); 
							dashedLine("myGraph", 50,110, 40,127); 

						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";

					}

					if(adjMatrix[2][0] == 1){ // circle 2 to 0
						if(adjMatrix[2][0] <= 4){
							if(adjMatrix[2][0] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[2][0] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[2][0] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(55,122);
							ctx.lineTo(55,66);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(50,76);
							ctx.lineTo(55,66);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(60,76);
							ctx.lineTo(55,66);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 55,122, 55,66); // cross edge
							dashedLine("myGraph", 50,76, 55,66); 
							dashedLine("myGraph", 60,76, 55,66); 

						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[0][3] == 1){ // circle 0 to 3
						if(adjMatrix[0][3] <= 4){
							if(adjMatrix[0][3] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[0][3] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[0][3] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(90,50);
							ctx.lineTo(208,122);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(208,112);
							ctx.lineTo(208,122);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,120);
							ctx.lineTo(208,122);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 90,50, 208,122); // cross edge
							dashedLine("myGraph", 208,112, 208,122); 
							dashedLine("myGraph", 190,120, 208,122); 

						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}


					if(adjMatrix[3][0] == 1){ // circle 3 to 0
						if(adjMatrix[3][0] <= 4){
							if(adjMatrix[3][0] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[3][0] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[3][0] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(198,132);
							ctx.lineTo(80,60);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(90,55);
							ctx.lineTo(80,60);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(95,76);
							ctx.lineTo(80,60);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 198,132, 80,60); // cross edge
							dashedLine("myGraph", 90,55, 80,60); 
							dashedLine("myGraph", 95,76, 80,60); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[0][4] == 1){ // circle 0 to 4
						if(adjMatrix[0][4] <= 4){
							if(adjMatrix[0][4] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[0][4] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[0][4] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(75,63);
							ctx.lineTo(140,210);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(130,200);
							ctx.lineTo(140,210);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(140,200);
							ctx.lineTo(140,210);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 75,63, 140,210); // cross edge
							dashedLine("myGraph", 130,200, 140,210); 
							dashedLine("myGraph", 140,200, 140,210); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[4][0] == 1){ // circle 4 to 0
						if(adjMatrix[4][0] <= 4){
							if(adjMatrix[4][0] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[4][0] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[4][0] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(130,210);
							ctx.lineTo(70,68);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(65,80);
							ctx.lineTo(70,68);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(79,74);
							ctx.lineTo(70,68);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 130,210, 70,68); // cross edge
							dashedLine("myGraph", 65,80, 70,68); 
							dashedLine("myGraph", 79,74, 70,68); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[1][2] == 1){ // circle 1 to 2
						if(adjMatrix[1][2] <= 4){
							if(adjMatrix[1][2] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[1][2] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[1][2] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(220,66);
							ctx.lineTo(89,150);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(93,140);
							ctx.lineTo(89,150);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(102,148);
							ctx.lineTo(89,150);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 220,66, 89,150); // cross edge
							dashedLine("myGraph", 93,140, 89,150); 
							dashedLine("myGraph", 102,148, 89,150); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";

					}

					if(adjMatrix[2][1] == 1){ // circle 2 to 1
						if(adjMatrix[2][1] <= 4){
							if(adjMatrix[2][1] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[2][1] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[2][1] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(89,140);
							ctx.lineTo(207,66);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(192,63);
							ctx.lineTo(205,66);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(200,75);
							ctx.lineTo(205,66);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 89,140, 207,66); // cross edge
							dashedLine("myGraph", 192,63, 207,66); 
							dashedLine("myGraph", 200,75, 207,66); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[1][3] == 1){ // circle 1 to 3
						if(adjMatrix[1][3] <= 4){
							if(adjMatrix[1][3] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[1][3] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[1][3] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(240,60);
							ctx.lineTo(240,130);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(235,120);
							ctx.lineTo(240,130);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(245,120);
							ctx.lineTo(240,130);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 240,60, 240,130); // cross edge
							dashedLine("myGraph", 235,120, 240,130); 
							dashedLine("myGraph", 245,120, 240,130); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[3][1] == 1){ // circle 3 to 1
						if(adjMatrix[3][1] <= 4){
							if(adjMatrix[3][1] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[3][1] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[3][1] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(230,122);
							ctx.lineTo(230,68);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(225,80);
							ctx.lineTo(230,68);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(235,80);
							ctx.lineTo(230,68);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 230,122, 230,68); // cross edge
							dashedLine("myGraph", 225,80, 230,68); 
							dashedLine("myGraph", 235,80, 230,68); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[1][4] == 1){ // circle 1 to 4
						if(adjMatrix[1][4] <= 4){
							if(adjMatrix[1][4] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[1][4] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[1][4] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(195,51);
							ctx.lineTo(158,215);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(155,200);
							ctx.lineTo(158,215);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(165,210);
							ctx.lineTo(158,215);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 195,51, 158,215); // cross edge
							dashedLine("myGraph", 155,200, 158,215); 
							dashedLine("myGraph", 165,210, 158,215); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[4][1] == 1){ // circle 4 to 1
						if(adjMatrix[4][1] <= 4){
							if(adjMatrix[4][1] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[4][1] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[4][1] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(145,212);
							ctx.lineTo(190,40);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(182,45);
							ctx.lineTo(190,40);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,60);
							ctx.lineTo(190,40);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 145,212, 190,40); // cross edge
							dashedLine("myGraph", 182,45, 190,40); 
							dashedLine("myGraph", 190,60, 190,40); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[2][3] == 1){ // circle 2 to 3
						if(adjMatrix[2][3] <= 4){
							if(adjMatrix[2][3] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[2][3] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[2][3] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(82,170);
							ctx.lineTo(200,170);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,165);
							ctx.lineTo(200,170);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(190,175);
							ctx.lineTo(200,170);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 82,170, 200,170); // cross edge
							dashedLine("myGraph", 190,165, 200,170); 
							dashedLine("myGraph", 190,175, 200,170); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[3][2] == 1){ // circle 3 to 2
						if(adjMatrix[3][2] <= 4){
							if(adjMatrix[3][2] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[3][2] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[3][2] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(191,160);
							ctx.lineTo(88,160);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(100,155);
							ctx.lineTo(90,160);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(100,165);
							ctx.lineTo(90,160);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 191,160, 88,160); // cross edge
							dashedLine("myGraph", 100,155, 88,160); 
							dashedLine("myGraph", 100,165, 88,160); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[2][4] == 1){ // circle 2 to 4
						if(adjMatrix[2][4] <= 4){
							if(adjMatrix[2][4] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[2][4] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[2][4] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(76,173);
							ctx.lineTo(120,220);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(93,210);
							ctx.lineTo(120,220);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(115,203);
							ctx.lineTo(120,220);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 76,173, 120,220); // cross edge
							dashedLine("myGraph", 93,210, 120,220); 
							dashedLine("myGraph", 115,203, 120,220); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[4][2] == 1){ // circle 4 to 2
						if(adjMatrix[4][2] <= 4){
							if(adjMatrix[4][2] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[4][2] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[4][2] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(110,240);
							ctx.lineTo(60,180);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(56,187);
							ctx.lineTo(60,180);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(73,185);
							ctx.lineTo(60,180);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 110,240, 60,180); // cross edge
							dashedLine("myGraph", 56,187, 60,180); 
							dashedLine("myGraph", 73,185, 60,180); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[3][4] == 1){ // circle 3 to 4
						if(adjMatrix[3][4] <= 4){
							if(adjMatrix[3][4] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[3][4] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[3][4] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(220,180);
							ctx.lineTo(170,240);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(172,232);
							ctx.lineTo(170,240);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(177,238);
							ctx.lineTo(170,240);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 220,180, 170,240); // cross edge
							dashedLine("myGraph", 172,232, 170,240); 
							dashedLine("myGraph", 177,238, 170,240); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

					if(adjMatrix[4][3] == 1){ // circle 4 to 3
						if(adjMatrix[4][3] <= 4){
							if(adjMatrix[4][3] == 2){ // tree edge
								ctx.lineWidth = 3;
							}else if(adjMatrix[4][3] == 3){ // forward edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#339900";
							}else if(adjMatrix[4][3] == 4){  // back edge
								ctx.lineWidth = 3;
								ctx.strokeStyle = "#0000FF";
							}else{
							
							}
							ctx.beginPath();
							ctx.moveTo(164,221);
							ctx.lineTo(205,175);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(181,183);
							ctx.lineTo(205,175);
							ctx.stroke();

							ctx.beginPath();
							ctx.moveTo(204,194);
							ctx.lineTo(205,175);
							ctx.stroke();
						}else{
							dashedLine("myGraph", 164,221, 205,175); // cross edge
							dashedLine("myGraph", 181,183, 205,175); 
							dashedLine("myGraph", 204,194, 205,175); 
						}			

						ctx.lineWidth = 1;
						ctx.strokeStyle = "#000000";
					}

				}else{

				}

			}// end function drawGraph()

			function next(){
				clearGraph();
				if(mode == 0){ // simulate and test
					if(graph == 0 || graph == 1){ // undirected graph
						if(isDecideAdjMatrix == 1 && DFSstep != 8){
							if(DFSstep == 0){
								document.getElementById("0circledu").value = "-1";
								document.getElementById("0circlepiu").value = "-1";
								document.getElementById("0circlefu").value = "-1";
								document.getElementById("1circledu").value = "-1";
								document.getElementById("1circlepiu").value = "-1";
								document.getElementById("1circlefu").value = "-1";
								document.getElementById("2circledu").value = "-1";
								document.getElementById("2circlepiu").value = "-1";
								document.getElementById("2circlefu").value = "-1";
								document.getElementById("3circledu").value = "-1";
								document.getElementById("3circlepiu").value = "-1";
								document.getElementById("3circlefu").value = "-1";
								document.getElementById("4circledu").value = "-1";
								document.getElementById("4circlepiu").value = "-1";
								document.getElementById("4circlefu").value = "-1";
								
								allStepString = allStepString + "現在開始進行 " + document.getElementById("DFSForm").graph1[graph].value + " 的DFS(深度優先搜尋)\n\n";
								document.getElementById("currentStepDFS").innerHTML = allStepString + string0;
								allStepString = document.getElementById("currentStepDFS").value;
								document.getElementById("allStepDFS").innerHTML = allStepString;
								drawGraph();
								DFSstep = 1;
							}else if(DFSstep == 1){
								document.getElementById("currentStepDFS").innerHTML = string3;
								for(var e = 0; e < circleDiscover.length; e++){
									if(circleDiscover[e] == 0){
										u = e;	
										stackString = stackString + u; // The stack must empty.			
										DFSstep = 3;
										document.getElementById("stack").value = stackString;
										break;
									}
								}

								if(DFSstep == 3){

								}else{
									DFSstep = 2;
								}
								drawGraph();
							}else if(DFSstep == 2){
								document.getElementById("currentStepDFS").innerHTML = "現在圖已經搜尋完畢，結束DFS";
								drawGraph();
								DFSstep = 6;
							}else if(DFSstep == 3){
								circleDiscover[u] = 1;
								find = -1;
								time = time + 1;
								var recordString = string4 + u + " \n用紅色圈圈圈起來，並且d[u]設為" + time + "\n";
								circleDiscover[u] = 1;
								circledu[u] = time;
								var formString = u + "circledu";
								document.getElementById(formString).value = time;

								

								DFSstep = 5;
								drawGraph();
								document.getElementById("currentStepDFS").innerHTML = recordString;

							}else if(DFSstep == 4){
								var recordString = "";
								stackStringHandle = (document.getElementById("stack").value).split(",");
								if(stackStringHandle[0] == "0"){
									u = stackStringHandle[0];
								}else if(stackStringHandle[0] == "1"){
									u = stackStringHandle[0];
								}else if(stackStringHandle[0] == "2"){
									u = stackStringHandle[0];
								}else if(stackStringHandle[0] == "3"){
									u = stackStringHandle[0];
								}else if(stackStringHandle[0] == "4"){
									u = stackStringHandle[0];
								}else{
									DFSstep = 1;
								}

								if(DFSstep == 4){
									time = time + 1;
									circleDiscover[u] = 2;
									recordString = string13 + stackStringHandle[0] + string11 + string12 + time;
									formString = stackStringHandle[0] + "circlefu";
									document.getElementById(formString).value = time;
									circlefu[stackStringHandle[0]] = time;

									connectStackString();
									document.getElementById("stack").value = stackString;
									stackStringHandle = (document.getElementById("stack").value).split(",");
									if(stackStringHandle[0] == "0" || stackStringHandle[0] == "1" || stackStringHandle[0] == "2" || stackStringHandle[0] == "3" || stackStringHandle[0] == "4"){
										u = stackStringHandle[0];
										DFSstep = 5;
									}else{
										DFSstep = 1;
									}
									
								}else{
									recordString = string17;
									DFSstep = 1;
								}
								document.getElementById("currentStepDFS").innerHTML = recordString;
								drawGraph();

							}else if(DFSstep == 5){
								var recordString = "";
								recordString = recordString + string5 + string6 + u + string7; 
								for(var e = 0; e < circleDiscover.length; e++){
									if(adjMatrix[u][e] == 1){
										if(circleDiscover[e] == 0){
											find = 1;
											formString = e + "circlepiu";
											document.getElementById(formString).value = u;
											recordString = recordString + "\n---> " + string8 + e + string9 + u;
											circlepiu[e] = u;
											stackString = e + "," + stackString;
											document.getElementById("stack").value = stackString;
											u = e;
											DFSstep = 3; // rewrite the recursive patrion from algorithm.
											break;
										}
									}
								}

								if(find == 1){

								}else{
									recordString = recordString + "\n" + string15 + u + string16; 
									DFSstep = 4;// ready to pop an element from stack
								}
								drawGraph();
								document.getElementById("currentStepDFS").innerHTML = recordString;
							}else{
								drawGraph();

							}
						}// end if
					}// end if
				}// end if
			}// end function next

			function connectStackString(){
				stackStringHandle = stackString.split(",");
				stackString = "";
				for(var i = 1; i < stackStringHandle.length; i++){
					if(stackStringHandle[i] == "0" || stackStringHandle[i] == "1" || stackStringHandle[i] == "2" || stackStringHandle[i] == "3" || stackStringHandle[i] == "4"){
						if(i == (stackStringHandle.length - 1)){
							stackString = stackString + stackStringHandle[i];
						}else{
							stackString = stackString + stackStringHandle[i] + ",";
						}
					}else{

					}
				}
			}// end function connectStackString()

			function doAll(){
				if(mode == 0){ // simulate
					if(graph == 0 || graph == 1){ // graph
						if(isDecideAdjMatrix == 1){ // is decide the adj matrix
							while(DFSstep != 6){ // the loop will stop when the DFSstep equal to SIX.
								next();
							}
						}
					}
				}
			}// end function doAll()

			function clearGraph(){
				var canvas = document.getElementById("myGraph");
				var ctx = canvas.getContext("2d");
				ctx.clearRect(0,0,canvas.width,canvas.height);
			}// end function clearGraph()

			function clearAll(){
				time = 0;
				document.getElementById("currentStepDFS").innerHTML = "";
				document.getElementById("allStepDFS").innerHTML = "";
				document.getElementById("0circledu").value = "";
				document.getElementById("0circlefu").value = "";
				document.getElementById("0circlepiu").value = "";
				document.getElementById("1circledu").value = "";
				document.getElementById("1circlefu").value = "";
				document.getElementById("1circlepiu").value = "";
				document.getElementById("2circledu").value = "";
				document.getElementById("2circlefu").value = "";
				document.getElementById("2circlepiu").value = "";
				document.getElementById("3circledu").value = "";
				document.getElementById("3circlefu").value = "";
				document.getElementById("3circlepiu").value = "";
				document.getElementById("4circledu").value = "";
				document.getElementById("4circlefu").value = "";
				document.getElementById("4circlepiu").value = "";
				document.getElementById("stack").value = "";
				DFSstep = 0;
				mode = -1;
				graph = -1;
				clearAdjMatrix();
				wrongInput = 0;
				for(var k = 0; k < circleDiscover.length; k++){
					circleDiscover[k] = 0;
					circledu[k] = -1;
					circlefu[k] = -1;
					circlepiu[k] = -1;
				}
				modeClear();
				graphClear();
				connectString = "";
				stackString = "";
				isDecideAdjMatrix = 0;
				isAnswer = 0;
				//process();
				allStepString = "";
			}// end function clearAll()

			if (window.CanvasRenderingContext2D && CanvasRenderingContext2D.prototype.lineTo) {
    			CanvasRenderingContext2D.prototype.dashedLine = function (x, y, x2, y2, dashArray) {
        		if (!dashArray) dashArray = [5, 5];
        			var dashCount = dashArray.length;
       				this.moveTo(x, y);
        			var dx = (x2 - x), dy = (y2 - y);
       				var slope = dy / dx;
        			var distRemaining = Math.sqrt(dx * dx + dy * dy);
        			var dashIndex = 0, draw = true;
        			while (distRemaining >= 0.1 && dashIndex < 10000) {
            			var dashLength = dashArray[dashIndex++ % dashCount];
            				if (dashLength == 0) dashLength = 0.001; // Hack for Safari
            					if (dashLength > distRemaining) dashLength = distRemaining;
            						var xStep = Math.sqrt(dashLength * dashLength / (1 + slope * slope));
            					x += xStep
            					y += slope * xStep;
            					this[draw ? 'lineTo' : 'moveTo'](x, y);
            					distRemaining -= dashLength;
            					draw = !draw;
        			}
        			// Ensure that the last segment is closed for proper stroking
        			this.moveTo(0, 0);
   				}
			}

			//canvas 畫布的id
			//defaultX defaultY 起始座標點
			//x，y終點座標點
			function dashedLine(canvas, defaultX, defaultY, x, y) {
    			var c = document.getElementById(canvas);
    			var cxt = c.getContext("2d");
   		 		cxt.strokeStyle = 'black';
    			var dashes = "5 5";
    			var drawDashes = function () {
        		var dashGapArray = dashes.replace(/^\s+|\s+$/g, '').split(/\s+/);
        		if (!dashGapArray[0] || (dashGapArray.length == 1 && dashGapArray[0] == 0)) return;
        			cxt.lineWidth = "1";
        			cxt.lineCap = "round";
        			cxt.beginPath();
        			cxt.strokeStyle = 'red';
        			//開始畫虛線
        			cxt.dashedLine(defaultX, defaultY, x, y, dashGapArray);
        			cxt.closePath();
        			cxt.stroke();
    			};
    			drawDashes();
			}

		</script>
	</body>
</html>
